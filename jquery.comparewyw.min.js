/*!
 * jQuery CompareWYW plugin 
 *
 * Copyright (c) 2011 Oskari Blomberg
 * http://www.oskariblomberg.fi
 *
 * Licensed under the GNU GPL v2 license
 * http://www.gnu.org/licenses/old-licenses/gpl-2.0.html
 *
 * Project home:
 * http://code.google.com/p/jquery-comparewyw/
 * 
 * Version: 1.0.0
 * Requires jQuery 1.4.0
 * Requires jQuery UI 1.7.0
 */
(function($){$.fn.compareWYW=function(a){var d={axis:'x',animateDuration:500,event:'drag'};var o=$.extend(d,a);if(o.event=='drag'&&(!$.ui||!$.ui.draggable)) return false;return this.each(function(){var $o=$(this);$o.wrapInner('<div class="compareWYW"></div>');var $c=$o.find('.compareWYW');var s={w:0,h:0};$o.bind('selectstart',function(b){b.preventDefault();});$c.children(':lt(2)').each(function(){var $i=$(this);var c=$i.height();var d=$i.width();if(d>s.w){s.w=d;}if(c>s.h){s.h=c;}$i.wrap('<div class="itemWrap"></div>');});$c.css({width:s.w,height:s.h});$c.append('<div class="indicator"><span class="handle"></span></div>');var $k=$c.find('.indicator').addClass((o.axis=='x')?'horizontalIndicator':'verticalIndicator');var $h=$c.find('.handle').addClass((o.axis=='x')?'horizontalHandle':'verticalHandle');var $f=$c.find('.itemWrap:eq(0)');var $l=$c.find('.itemWrap:eq(1)');if(o.axis=='x'){var g=($.browser.msie)?'e-resize':'ew-resize';}else if(o.axis=='y'){var g=($.browser.msie)?'n-resize':'ns-resize';}$k.css({left:(o.axis=='x')?(s.w/2)-$k.width():0,top:(o.axis=='y')?(s.h/2)-$k.height():0,cursor:g});$h.css({left:(o.axis=='x')?($k.width()/2)-($h.width()/2):(s.w/2)-($h.width()/2),top:(o.axis=='y')?($k.height()/2)-($h.height()/2):(s.h/2)-($h.height()/2)});$f.css({width:(o.axis=='x')?s.w/2:s.w,height:(o.axis=='y')?s.h/2:s.h,zIndex: 2});$l.css({zIndex:1});if(o.event=='drag'){$k.draggable({axis:o.axis,containment:$c,drag:function(b,u){r(b,u);}});$c.live('click',function(b){r(b,null);});}else if(o.event=='hover'){$c.live('mousemove',function(b){r(b,null);});};function r(b,u){if(b.type=='click'||b.type=='mousemove'){var p=(o.axis=='x')?b.pageX-$c.offset().left:b.pageY-$c.offset().top;}else{var p=(o.axis=='x')?u.position.left:u.position.top;}$f.animate({width:(o.axis=='x')?p:s.w,height:(o.axis=='y')?p:s.h},(b.type=='click')?o.animateDuration:0);if(b.type=='click'||b.type=='mousemove'){$k.animate({left:(o.axis=='x')?p:0,top:(o.axis=='y')?p:0},(b.type=='click')?o.animateDuration:0);}}});};})(jQuery);